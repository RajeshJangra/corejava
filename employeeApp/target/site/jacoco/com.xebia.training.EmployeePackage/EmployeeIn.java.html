<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>EmployeeIn.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">employeeApp</a> &gt; <a href="index.source.html" class="el_package">com.xebia.training.EmployeePackage</a> &gt; <span class="el_source">EmployeeIn.java</span></div><h1>EmployeeIn.java</h1><pre class="source lang-java linenums">package com.xebia.training.EmployeePackage;

import jdk.nashorn.internal.codegen.CompilerConstants;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import javax.xml.parsers.DocumentBuilderFactory;
import java.io.File;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;
import java.util.concurrent.*;

public class EmployeeIn implements Callable&lt;Employee&gt; {
    Employee employee;
    int id;
    static Date date;
    Date date1, date2;

<span class="fc" id="L23">    public EmployeeIn(int id) {</span>
<span class="fc" id="L24">        this.id = id;</span>
<span class="fc" id="L25">    }</span>

    @Override
    public String toString() {
<span class="nc" id="L29">        return &quot;EmployeeIn{&quot; +</span>
                &quot;employee=&quot; + employee +
                &quot;, id=&quot; + id +
                &quot;, date1=&quot; + date1 +
                &quot;, date2=&quot; + date2 +
                '}';
    }

    @Override
    public boolean equals(Object o) {
<span class="nc bnc" id="L39" title="All 2 branches missed.">        if (this == o) return true;</span>
<span class="nc bnc" id="L40" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>

<span class="nc" id="L42">        EmployeeIn that = (EmployeeIn) o;</span>

<span class="nc bnc" id="L44" title="All 2 branches missed.">        if (id != that.id) return false;</span>
<span class="nc bnc" id="L45" title="All 6 branches missed.">        if (employee != null ? !employee.equals(that.employee) : that.employee != null) return false;</span>
<span class="nc bnc" id="L46" title="All 6 branches missed.">        if (date1 != null ? !date1.equals(that.date1) : that.date1 != null) return false;</span>
<span class="nc bnc" id="L47" title="All 6 branches missed.">        return !(date2 != null ? !date2.equals(that.date2) : that.date2 != null);</span>

    }

    @Override
    public int hashCode() {
<span class="nc bnc" id="L53" title="All 2 branches missed.">        int result = employee != null ? employee.hashCode() : 0;</span>
<span class="nc" id="L54">        result = 31 * result + id;</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">        result = 31 * result + (date1 != null ? date1.hashCode() : 0);</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">        result = 31 * result + (date2 != null ? date2.hashCode() : 0);</span>
<span class="nc" id="L57">        return result;</span>
    }

    public static void resignEmployee(Employee employee) throws ParseException {
<span class="nc" id="L61">        Scanner sc = new Scanner(System.in);</span>
<span class="nc" id="L62">        System.out.println(&quot;does employee want to resign? Y/N &quot;);</span>
<span class="nc" id="L63">        String reply = sc.nextLine();</span>
<span class="nc bnc" id="L64" title="All 2 branches missed.">        if (reply.equals(&quot;Y&quot;)) {</span>
<span class="nc" id="L65">            Calendar c = Calendar.getInstance();</span>
<span class="nc" id="L66">            DateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);</span>
            //    System.out.println(dateFormat.format(c.getTime()));
<span class="nc" id="L68">            date = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;).parse(dateFormat.format(c.getTime()));</span>
<span class="nc" id="L69">            employee.setEndDate(date);</span>
<span class="nc" id="L70">            employee.getDepartment().setEndDate(date);</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">            for (Project project : employee.getProject()) {</span>
<span class="nc" id="L72">                project.setEndDate(date);</span>
<span class="nc" id="L73">            }</span>
<span class="nc" id="L74">            System.out.println(employee.getName()+&quot; Sucessfully Resigned\nUpdated Details are\n&quot;+employee);</span>

<span class="nc" id="L76">        } else {</span>
<span class="nc" id="L77">            date = null;</span>
<span class="nc" id="L78">            System.out.println(&quot;No Employee to resign&quot;);</span>
        }

<span class="nc" id="L81">    }</span>

    public Employee call() {

        try {

<span class="fc" id="L87">            File file = new File(&quot;C:\\Users\\pjhanwan\\corejava\\employeeApp\\src\\main\\java\\com\\xebia\\training\\EmployeePackage\\Employee.xml&quot;);</span>
<span class="fc" id="L88">            Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(file);</span>

<span class="fc" id="L90">            doc.getDocumentElement().normalize();</span>
            //  System.out.println(&quot;Root element :&quot; + doc.getDocumentElement().getNodeName());
<span class="fc" id="L92">            NodeList nList = doc.getElementsByTagName(&quot;employee&quot;);</span>
            // System.out.println(&quot;----------------------------&quot;);
<span class="fc" id="L94">            iterateNodes(nList);</span>
<span class="nc" id="L95">        } catch (Exception e) {</span>
<span class="nc" id="L96">            e.printStackTrace();</span>
<span class="fc" id="L97">        }</span>
<span class="fc" id="L98">        return employee;</span>

    }

    private void iterateNodes(final NodeList nList) throws ParseException, ExecutionException, InterruptedException {
<span class="fc bfc" id="L103" title="All 2 branches covered.">        for (int temp = 0; temp &lt; nList.getLength(); temp++) {</span>
<span class="fc" id="L104">            Node nNode = nList.item(temp);</span>
            // System.out.println(&quot;\nCurrent Element :&quot; + nNode.getNodeName());
<span class="pc bpc" id="L106" title="1 of 2 branches missed.">            if (nNode.getNodeType() == Node.ELEMENT_NODE) {</span>
<span class="fc" id="L107">                printElements((Element) nNode);</span>
            }
        }
<span class="fc" id="L110">    }</span>

    private void printElements(final Element nNode) throws ParseException, ExecutionException, InterruptedException {
<span class="fc" id="L113">        Element eElement = nNode;</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">        if (Integer.parseInt(eElement.getAttribute(&quot;id&quot;)) == id) {</span>
<span class="fc" id="L115">            SalaryIn salaryIn = new SalaryIn(id);</span>
<span class="fc" id="L116">            ProjectIn projectIn = new ProjectIn(id);</span>
<span class="fc" id="L117">            AddressIn addressIn = new AddressIn(id);</span>
<span class="fc" id="L118">            ContactsIn contactsIn = new ContactsIn(id);</span>
<span class="fc" id="L119">            DepartmentIn departmentIn = new DepartmentIn(id);</span>
<span class="fc" id="L120">            PersonalIn personalIn = new PersonalIn(id);</span>

<span class="fc" id="L122">            ExecutorService executorService = Executors.newFixedThreadPool(6);</span>

<span class="fc" id="L124">            Future&lt;Salary&gt; salaryFuture = executorService.submit(salaryIn);</span>
<span class="fc" id="L125">            Salary salary = salaryFuture.get();</span>

<span class="fc" id="L127">            Future&lt;List&lt;Project&gt;&gt; projectFuture = executorService.submit(projectIn);</span>
<span class="fc" id="L128">            List&lt;Project&gt; project = projectFuture.get();</span>

<span class="fc" id="L130">            Future&lt;Address&gt; addressFuture = executorService.submit(addressIn);</span>
<span class="fc" id="L131">            Address address = addressFuture.get();</span>
<span class="fc" id="L132">            System.out.println(address);</span>
<span class="fc" id="L133">            Future&lt;Contacts&gt; contactsFuture = executorService.submit(contactsIn);</span>
<span class="fc" id="L134">            Contacts contacts = contactsFuture.get();</span>


<span class="fc" id="L137">            Future&lt;Department&gt; departmentFuture = executorService.submit(departmentIn);</span>
<span class="fc" id="L138">            Department department = departmentFuture.get();</span>

<span class="fc" id="L140">            Future&lt;PersonalDetails&gt; personaldetailsFuture = executorService.submit(personalIn);</span>
<span class="fc" id="L141">            PersonalDetails personaldetails = personaldetailsFuture.get();</span>


<span class="pc bpc" id="L144" title="1 of 2 branches missed.">            if (Integer.parseInt(eElement.getAttribute(&quot;id&quot;)) == id) {</span>
<span class="fc" id="L145">                Date dob = null, startDate = null, endDate = null;</span>

<span class="fc" id="L147">                dob = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;).parse(eElement.getElementsByTagName(&quot;dob&quot;).item(0).getTextContent());</span>

<span class="fc" id="L149">                startDate = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;).parse(eElement.getElementsByTagName(&quot;start_date&quot;).item(0).getTextContent());</span>
<span class="fc" id="L150">                endDate = EmployeeIn.date;</span>


<span class="fc" id="L153">                employee = new Employee(id, eElement.getElementsByTagName(&quot;name&quot;).item(0).getTextContent(), eElement.getElementsByTagName(&quot;father_name&quot;).item(0).getTextContent(),</span>
<span class="fc" id="L154">                        Integer.parseInt(eElement.getElementsByTagName(&quot;age&quot;).item(0).getTextContent()), eElement.getElementsByTagName(&quot;gender&quot;).item(0).getTextContent(),</span>
<span class="fc" id="L155">                        Employee.MaritalStatus.valueOf(eElement.getElementsByTagName(&quot;Marital_Status&quot;).item(0).getTextContent()),</span>
<span class="fc" id="L156">                        Employee.Designation.valueOf(eElement.getElementsByTagName(&quot;designation&quot;).item(0).getTextContent()),</span>
<span class="fc" id="L157">                        Float.parseFloat(eElement.getElementsByTagName(&quot;workExp&quot;).item(0).getTextContent()), dob, startDate, endDate, salary, project, address, contacts,</span>
                        department, personaldetails);

            }
        }

<span class="fc" id="L163">    }</span>
}


</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>